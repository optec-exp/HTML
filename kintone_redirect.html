<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Kintone 案件番号扫码跳转</title>
</head>
<body>
  <h3>请输入或扫码案件番号，然后按回车</h3>
  <input
    type="text"
    id="caseNoInput"
    placeholder="请输入案件番号"
    autofocus
    style="width:300px; font-size:16px;"
  >

  <script>
    const input = document.getElementById("caseNoInput");
    // 自动聚焦
    window.onload = () => {
      input.focus();
      input.select();
    };
    // 保持焦点
    setInterval(() => {
      if (document.activeElement !== input) {
        input.focus();
        input.select();
      }
    }, 1000);
    // 回车事件：带参数跳到 Kintone 列表页
    input.addEventListener("keypress", e => {
      if (e.key === "Enter") {
        const caseNo = e.target.value.trim();
        if (!caseNo) return;
        const domain = "https://si8qxbanrfkx.cybozu.com";  // ← 替成你的子域名
        const appId  = "863";                            // ← 替成你的 App ID
        // 我们在 URL 里加上 caseNo 并标记 print
        const url = `${domain}/k/${appId}/?caseNo=${encodeURIComponent(caseNo)}&print=true`;
        window.location.href = url;
      }
    });
  </script>
</body>
</html>
